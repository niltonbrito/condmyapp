<div th:replace="~{fragments/header}"></div>

<!-- Begin Page Content -->
<div class="container-fluid">

	<!-- ✅ Toasts Bootstrap -->
<div th:replace="~{fragments/messages :: messages}"></div>

	<!-- Page Heading -->
	<h1 class="h3 mb-2 text-gray-800">Administradores</h1>
	<p class="mb-4">
		Lista de administradores do sistema <a target="_blank" href="#">official
			DataTables documentation</a>.
	</p>

	<!-- DataTales Example -->
	<div class="card shadow mb-4">
		<div class="card-header d-flex py-3">
			<div class="col-4">
				<a type="button"
					sec:authorize="hasAnyAuthority('ADMINISTRADOR','GERENTE')"
					th:href="@{/user/new}" class="btn btn-primary mb-2"><i class="bi bi-person-add mx-3"></i>Cadastrar
					Novo</a>
				<h6 class="m-0 font-weight-bold text-primary">Lista de Usuários</h6>
			</div>
		</div>

		<div class="card-body">
			<div class="table-responsive">
				<table class="table table-sm table-bordered" id="dataTable"
					width="100%" cellspacing="0">
					<thead class="thead-light text-center">
						<tr>
							<th>ID</th>
							<th>Nome</th>
							<th>CPF</th>
							<th>E-mail</th>
							<th>Celular</th>
							<th>Username</th>
							<th>Gênero</th>
							<th>Status</th>
							<th>Grupo</th>
							<th>Data Criação</th>
							<th>Observação</th>
							<th>Ações</th>
						</tr>
					</thead>
					<tbody class="thead-light">
						<tr th:each="user : ${users}">
							<td th:text="${user.id}" class="text-center"></td>
							<td th:text="${user.firstName + ' ' + user.lastName}"></td>
							<td th:text="${@maskUtils.maskCpfCripto(user.cpf)}" class="text-center"></td>
							<td th:text="${user.email}" class="text-center"></td>
							<td th:text="${@maskUtils.maskPhone(user.phone)}" class="text-center"></td>
							<td th:text="${user.username}" class="text-center"></td>
							<td th:text="${user.gender}" class="text-center"></td>
							<td th:text="${user.status}" class="text-center"></td>
							<td th:text="${user.userGroup}" class="text-center"></td>
							<td
								th:text="${#temporals.format(user.createdAt, 'dd/MM/yyyy HH:mm:ss')}"
								class="text-center"></td>
							<td th:text="${#strings.abbreviate(user.description, 100)}"></td>
							<td class="text-center">
								<div class="btn-group" role="group">
									<!-- Botão Alterar -->
									<a type="button"
										class="btn btn-outline-warning border-0 rounded"
										sec:authorize="hasAnyAuthority('ADMINISTRADOR','GERENTE')"
										th:href="@{'/user/' + ${user.id}}"> <img
										src="/img/icon_edit.png" width="20" height="20"
										alt="Editar usuário">
									</a>
									<!-- Botão Excluir -->
									<a type="button"
										class="btn btn-outline-danger border-0 rounded"
										sec:authorize="hasAuthority('ADMINISTRADOR')"
										th:onclick="'confirmarExclusao(\'' + @{/user/{id}/delete(id=${user.id})} + '\')'">
										<img src="/img/icon_delete.png" width="20" height="20"
										alt="Deletar usuário">
									</a>
									<!-- Botão Desbloquear -->
									<a type="button"
										class="btn btn-outline-secondary border-0 rounded"
										sec:authorize="hasAuthority('ADMINISTRADOR')"
										th:if="${user.status.name() == 'BLOQUEADO'}"
										th:href="@{/user/{id}/desbloquear(id=${user.id})}"> <img
										src="/img/icon_locked.png" width="20" height="20"
										alt="Desbloquear usuário">
									</a>
								</div>
							</td>
						</tr>
					</tbody>
				</table>

			</div>
		</div>
	</div>

</div>

<!-- /.container-fluid -->
<div th:replace="~{fragments/footer}"></div>